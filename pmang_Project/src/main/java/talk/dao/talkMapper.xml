<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="talkSQL">
 	
 	<!-- 방 조회 -->
 	<select id="isRoom" parameterType="talkRoom" resultType="talkRoom">
 		select * from talkroom where userId = #{userId} and partner_userId = #{partner_userId}  
 	</select>
 	
 	<!-- 방 생성 -->
 	<insert id="createRoom" parameterType="talkRoom">
 		insert into talkroom values(talkRoom_seq.nextval,#{userId},#{partner_userId},#{item_seq},0)
 	</insert>
 	
 	<!-- Message 생성 -->
 	<insert id="insertMessage" parameterType="message">
 		insert into message values(#{sender_user_id},#{receiver_user},#{talkRoom_seq},#{talk_content},sysdate,#{receiver_user_profileImage},#{item_seq})
 	</insert>
 	
 	<!-- 방생성시 sellerTable 에서 marketName,pf_Photo 가져오기 -->
 	<select id="getSellerInfoSearch" parameterType="String" resultType="seller">
 		select marketName,pf_Photo from seller where userId = #{partner_userId }
 	</select>
 	
 	<!-- 방생성시 itemTable 에서 img1,item_price,itemSubject 가져오기 -->
 	<select id="getItemInfoSearch" parameterType="String" resultType="item">
 		select img1,item_price,item_subject from item where userId = #{partner_userId }
 	</select>
 	
 	<!-- partner_id 구하기 -->
 	<select id="getPartnerUserId" parameterType="int" resultType="String">
 		select userId from item where item_seq = #{item_seq }
 	</select>
 	
 	<!-- 방 리스트 출력 -->
 	<select id="getRoomList" parameterType="String" resultType="talkRoom">
 		select * from talkroom where userId = #{userId}
 	</select>
 	
 </mapper>
 
